<html>
  <head>
    <title>仿淘宝商品详情页 - fangxiaogang</title>
    <link href='/images/fav.png' rel='shortcut icon'>
<link href='/atom.xml' rel='alternate' type='application/rss+xml'>
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight.css">
<link rel="stylesheet" href="/css/responsive.css">
<script src="/js/jquery.js"></script>
<script src="/js/basics.js"></script>
<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type'>


  </head>
  <body>
    <header>
  <a id='go-back-home' href='/'><img src='/images/scribble.png' alt='Home' width='53' height='59'></a>
  <p>fangxiaogang</p>
  <p>我可以！</p>
</header>

    <div id='container'>
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='https://fangxiaogang.github.io/About/index.html'>About</a>
  
    <a class='main' href='https://github.com/fangxiaogang'>Github</a>
  
    <a class='main' href='mailto:1005275062@qq.com'>Email</a>
  
</div>

      <section class='paging'>
  
    <div class='left'>
      <a href='/2017/12/28/记收到阿里巴巴的面试邀请邮件/'>
        ‹
      </a>
    </div>
  
  
    <div class='right'>
      <a href='/2017/06/22/Ftp-Android-客户端上传下载方案详解/'>
        ›
      </a>
    </div>
  
</section>

      <div class='content'>
        <section class='post'>
          <h1>
            <div class='date'>2017-06-26</div>
            仿淘宝商品详情页
          </h1>
          <h5 id="把玩淘宝客户端时，觉得淘宝详情页效果还不错，上拉标题栏渐变。就想着模仿做一个，于是有了这篇文章。"><a href="#把玩淘宝客户端时，觉得淘宝详情页效果还不错，上拉标题栏渐变。就想着模仿做一个，于是有了这篇文章。" class="headerlink" title="把玩淘宝客户端时，觉得淘宝详情页效果还不错，上拉标题栏渐变。就想着模仿做一个，于是有了这篇文章。"></a>把玩淘宝客户端时，觉得淘宝详情页效果还不错，上拉标题栏渐变。就想着模仿做一个，于是有了这篇文章。</h5><h5 id="来，先看东西"><a href="#来，先看东西" class="headerlink" title="来，先看东西"></a>来，先看东西</h5><p><img src="http://onfkdy4l9.bkt.clouddn.com/taobao.gif" alt="q"></p>
<h6 id="上代码-自定义的-ScrollView"><a href="#上代码-自定义的-ScrollView" class="headerlink" title="上代码 自定义的 ScrollView"></a>上代码 自定义的 ScrollView</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">public class ObservableScrollView extends ScrollView &#123;</div><div class="line"></div><div class="line">	public interface ScrollViewListener &#123;</div><div class="line"></div><div class="line">		void onScrollChanged(ObservableScrollView scrollView, int x, int y,</div><div class="line">                             int oldx, int oldy);</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	private ScrollViewListener scrollViewListener = null;</div><div class="line"></div><div class="line">	public ObservableScrollView(Context context) &#123;</div><div class="line">		super(context);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public ObservableScrollView(Context context, AttributeSet attrs,</div><div class="line">                                int defStyle) &#123;</div><div class="line">		super(context, attrs, defStyle);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public ObservableScrollView(Context context, AttributeSet attrs) &#123;</div><div class="line">		super(context, attrs);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setScrollViewListener(ScrollViewListener scrollViewListener) &#123;</div><div class="line">		this.scrollViewListener = scrollViewListener;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	protected void onScrollChanged(int x, int y, int oldx, int oldy) &#123;</div><div class="line">		super.onScrollChanged(x, y, oldx, oldy);</div><div class="line">		if (scrollViewListener != null) &#123;</div><div class="line">			scrollViewListener.onScrollChanged(this, x, y, oldx, oldy);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="activity-代码"><a href="#activity-代码" class="headerlink" title="activity 代码"></a>activity 代码</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">@Override</div><div class="line">   public void onScrollChanged(ObservableScrollView scrollView, int x, int y, int oldx, int oldy) &#123;</div><div class="line">       Log.i(TAG, &quot;y:--------&gt;&quot; + y);</div><div class="line">       Log.i(TAG, &quot;oldy:--------&gt;&quot; + oldy);</div><div class="line">       if (y &lt;= 0) &#123;</div><div class="line">           //设置渐变的头部的背景颜色</div><div class="line">           Log.i(TAG, &quot;y &lt;= 0:-----------&gt;&quot;);</div><div class="line">           headLayout.setBackgroundColor(Color.argb((int) 0, 255, 255, 255));</div><div class="line">           tv1.setTextColor(Color.TRANSPARENT);</div><div class="line">           tv2.setTextColor(Color.TRANSPARENT);</div><div class="line">           tv3.setTextColor(Color.TRANSPARENT);</div><div class="line">           tv4.setTextColor(Color.TRANSPARENT);</div><div class="line">           dividerView.setVisibility(View.GONE);</div><div class="line">       &#125; else if (y &gt; 0 &amp;&amp; y &lt;= imageHeight) &#123;</div><div class="line">           //滑动距离小于banner图的高度时，设置背景和字体颜色颜色透明度渐变</div><div class="line">           Log.i(TAG, &quot;滑动距离小于banner图的高度----&gt;&quot; + imageHeight);</div><div class="line">           float scale = (float) y / imageHeight;</div><div class="line">           int alpha = (int) (scale * 255);</div><div class="line">           headLayout.setBackgroundColor(Color.argb((int) alpha, 255, 255, 255));</div><div class="line">           tv1.setTextColor(Color.argb(alpha, 1, 24, 28));</div><div class="line">           tv2.setTextColor(Color.argb(alpha, 1, 24, 28));</div><div class="line">           tv3.setTextColor(Color.argb(alpha, 1, 24, 28));</div><div class="line">           tv4.setTextColor(Color.argb(alpha, 1, 24, 28));</div><div class="line">           backIv.getBackground().setAlpha(255 - alpha);</div><div class="line">           shopCartIv.getBackground().setAlpha(255 - alpha);</div><div class="line">           moreIv.getBackground().setAlpha(255 - alpha);</div><div class="line">           if (oldy &lt; y) &#123;</div><div class="line">               // 手指向上滑动，屏幕内容下滑</div><div class="line">               backIv.setImageResource(R.mipmap.ic_back_dark);</div><div class="line">               shopCartIv.setImageResource(R.mipmap.ic_shopping_dark);</div><div class="line">               moreIv.setImageResource(R.mipmap.ic_more_dark);</div><div class="line">           &#125; else if (oldy &gt; y) &#123;</div><div class="line">               // 手指向下滑动，屏幕内容上滑</div><div class="line">               backIv.setImageResource(R.mipmap.ic_back);</div><div class="line">               shopCartIv.setImageResource(R.mipmap.ic_shopping_cart);</div><div class="line">               moreIv.setImageResource(R.mipmap.ic_more);</div><div class="line">           &#125;</div><div class="line">       &#125; else &#123;</div><div class="line">           //滑动到banner下面设置普通颜色</div><div class="line">           Log.i(TAG, &quot;滑动到banner下面----&gt;&quot; + imageHeight);</div><div class="line">           headLayout.setBackgroundColor(Color.WHITE);</div><div class="line">           tv1.setTextColor(Color.BLACK);</div><div class="line">           tv2.setTextColor(Color.BLACK);</div><div class="line">           tv3.setTextColor(Color.BLACK);</div><div class="line">           tv4.setTextColor(Color.BLACK);</div><div class="line">           dividerView.setVisibility(View.VISIBLE);</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h6 id="完整代码已经上至-Github"><a href="#完整代码已经上至-Github" class="headerlink" title="完整代码已经上至 Github"></a>完整代码已经上至 <a href="https://github.com/fangxiaogang/TaobaoView" target="_blank" rel="external">Github</a></h6>
          <br>
<p>fangxiaogang</p>
<p><img src='/images/scribble3.png' alt='scribble'></p>

        </section>
      </div>
      
      <div class='block'>
  
    <a class='main' href='/'>Home</a>
  
    <a class='main' href='https://fangxiaogang.github.io/About/index.html'>About</a>
  
    <a class='main' href='https://github.com/fangxiaogang'>Github</a>
  
    <a class='main' href='mailto:1005275062@qq.com'>Email</a>
  
</div>

    </div>
    
  </body>
</html>
